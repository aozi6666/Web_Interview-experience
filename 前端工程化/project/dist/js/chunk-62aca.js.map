{"version":3,"file":"js/chunk-62aca.js","mappings":";kUAEA,IAAIA,EAcG,SAASC,EAAgBC,GAC9B,IAAMC,EAASD,EACZE,KACC,SAACC,GAAD,kCACOA,EAAEC,IADT,uCAC2CD,EAAEE,MAD7C,8BAEOF,EAAEC,IAFT,uCClByD,2BDkBzD,aAE4DD,EAAEG,MAF9D,iCClB2F,2BDkB3F,aAGwBH,EAAEI,KAH1B,qBAMDC,KAAK,IACRV,EAAUW,KAAKR,EAChB,CApBCH,EAAYY,IAAE,SAASC,SCNG,4BDMwBC,SAAS,kREN7D,smNACO,SAAeC,EAAtB,sEAAO,WAAyBC,EAAMC,GAA/B,uFACcC,IAAAA,IAAU,cAAe,CAC1CC,OAAQ,CACNH,KAAAA,EACAI,KAAMH,KAJL,cACCI,EADD,yBAOEA,EAAKC,MAPP,kECDP,SAAgB,MAAQ,2BAA2B,SAAW,2BAA2B,OAAS,+QCAlG,8hGAAAC,GAAA,wBAAAA,EAAA,sBAAAA,GAAA,iBAAAA,GAAA,0oDAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,4bAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,yhBAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,qGAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,kkBAGA,IAAIvB,EAgBG,SAASwB,EAAaR,EAAMC,EAAOQ,GAOxC,SAASC,EAAUC,EAAMC,EAAQC,GAC/B,IAAMC,EAAOlB,IAAE,UAAUE,SAASd,GAAW2B,KAAKA,GAC5CI,EAAYC,EAAOJ,GACzBE,EAAKjB,SAASkB,GAEC,KAAXH,GACFE,EAAKG,GAAG,QAAR,YAAiB,oGAEIlB,EAAUc,EAAYZ,GAF1B,OAIfhB,GAFMoB,EAFS,QAIMC,KAAKY,WAE1BV,EAAaK,EAAYZ,EAAOI,EAAKC,KAAKa,YAN3B,2CASpB,CArBDnC,EAAUoC,QAsBV,IAAMC,EAAaC,KAAKC,KAAKd,EAAQR,GAErCS,EAAU,KAAe,IAATV,EAAa,WAAa,GAAI,GAE9CU,EAAU,MAAgB,IAATV,EAAa,WAAa,GAAIA,EAAO,GAEtD,IACIwB,EAAMF,KAAKG,MAAMzB,EAAO0B,GAC5BF,EAAM,IAAMA,EAAM,GAClB,IAAIG,EAAMH,EAHO,GAGU,EAC3BG,EAAMN,IAAeM,EAAMN,GAC3B,IAAK,IAAId,EAAIiB,EAAKjB,GAAKoB,EAAKpB,IAC1BG,EAAUH,EAAGA,IAAMP,EAAO,SAAW,GAAIO,GAI3CG,EAAU,MAAOV,IAASqB,EAAa,WAAa,GAAIrB,EAAO,GAE/DU,EAAU,KAAMV,IAASqB,EAAa,WAAa,GAAIA,EACxD,oPC7DD,8hGAAAd,GAAA,wBAAAA,EAAA,sBAAAA,GAAA,iBAAAA,GAAA,0oDAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,4bAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,yhBAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,qGAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,omBAGA,oGACqBR,EAAU,EAAG,IADlC,OAEEd,GADMoB,EADR,QAEuBC,KAAKY,WAC1BV,EAAa,EAAG,GAAIH,EAAKC,KAAKa,YAHhC,kEDKEnC,EAAYY,IAAE,SAASC,SAASmB,EAAAA,OAAclB,SAAS,2CCCzD8B","sources":["webpack://movie-list/./src/movie/list/index.js","webpack://movie-list/./src/movie/list/index.module.less?bbc3","webpack://movie-list/./src/api/movie.js","webpack://movie-list/./src/movie/pager/index.module.less?10e2","webpack://movie-list/./src/movie/pager/index.js","webpack://movie-list/./src/movie/index.js"],"sourcesContent":["import $ from 'jquery';\nimport styles from './index.module.less';\nlet container;\n/**\n * 初始化函数，负责创建容器\n */\nfunction init() {\n  container = $('<div>').addClass(styles.container).appendTo('#app');\n}\n\ninit();\n\n/**\n * 根据传入的电影数组，创建元素，填充到容器中\n * @params movies 电影数组\n */\nexport function createMovieTags(movies) {\n  const result = movies\n    .map(\n      (m) => `<div>\n  <a href=\"${m.url}\" target=\"_blank\"><img src=\"${m.cover}\"></a>\n  <a href=\"${m.url}\" target=\"_blank\"><p class=\"${styles.title}\">${m.title}</p></a>\n  <p class=\"${styles.rate}\">${m.rate}</p>\n  </div>`\n    )\n    .join('');\n  container.html(result);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"uMz2yhYknFuJZRd7b7XJFA==\",\"title\":\"BtBUw2U6VLoA6+k4K3-z2Q==\",\"rate\":\"WNoS2RPDp8MiSjn5evxbFw==\"};","import axios from 'axios';\n\nexport async function getMovies(page, limit) {\n  const resp = await axios.get('/api/movies', {\n    params: {\n      page,\n      size: limit,\n    },\n  });\n  return resp.data;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"pager\":\"Mu4wW1frNLWelaAKOB-EeQ==\",\"disabled\":\"WiANoHCkVXAr79WckRM0jQ==\",\"active\":\"Q6a1XbI2zmrVMT8ZicG8FA==\"};","import $ from 'jquery';\nimport styles from './index.module.less';\nimport { getMovies } from '@/api/movie';\nimport { createMovieTags } from '@/movie/list';\nlet container;\n/**\n * 初始化函数，负责创建容器\n */\nfunction init() {\n  container = $('<div>').addClass(styles.pager).appendTo('#app');\n}\n\ninit();\n\n/**\n * 根据传入的页码、页容量、总记录数，创建分页区域的标签\n * @params page 页码\n * @params limit 页容量\n * @params total 总页数\n */\nexport function createPagers(page, limit, total) {\n  container.empty();\n  /**\n   * 辅助函数，负责帮忙创建一个页码标签\n   * @params text 标签的文本\n   * @params status 标签的状态，空字符串-普通状态，disabled-禁用状态，active-选中状态\n   */\n  function createTag(text, status, targetPage) {\n    const span = $('<span>').appendTo(container).text(text);\n    const className = styles[status];\n    span.addClass(className);\n    // 只有是普通样式时才需要监听点击事件\n    if (status === '') {\n      span.on('click', async function () {\n        //1. 重新拿数据\n        const resp = await getMovies(targetPage, limit);\n        //2. 重新生成列表\n        createMovieTags(resp.data.movieList);\n        //3. 重新生成分页区域\n        createPagers(targetPage, limit, resp.data.movieTotal);\n      });\n    }\n  }\n  const pageNumber = Math.ceil(total / limit); // 最大页码\n  //1. 创建首页标签\n  createTag('首页', page === 1 ? 'disabled' : '', 1);\n  //2. 创建上一页标签\n  createTag('上一页', page === 1 ? 'disabled' : '', page - 1);\n  //3. 创建数字页码标签\n  const maxCount = 10; // 最大数字页码的数量\n  let min = Math.floor(page - maxCount / 2);\n  min < 1 && (min = 1);\n  let max = min + maxCount - 1;\n  max > pageNumber && (max = pageNumber);\n  for (let i = min; i <= max; i++) {\n    createTag(i, i === page ? 'active' : '', i);\n  }\n\n  //4. 创建下一页标签\n  createTag('下一页', page === pageNumber ? 'disabled' : '', page + 1);\n  //5. 创建尾页标签\n  createTag('尾页', page === pageNumber ? 'disabled' : '', pageNumber);\n}\n","import { createMovieTags } from './list';\nimport { getMovies } from '../api/movie';\nimport { createPagers } from './pager';\n\nasync function init() {\n  const resp = await getMovies(1, 30);\n  createMovieTags(resp.data.movieList); // 创建列表\n  createPagers(1, 30, resp.data.movieTotal); // 创建分页区域\n}\n\ninit();\n"],"names":["container","createMovieTags","movies","result","map","m","url","cover","title","rate","join","html","$","addClass","appendTo","getMovies","page","limit","axios","params","size","resp","data","i","createPagers","total","createTag","text","status","targetPage","span","className","styles","on","movieList","movieTotal","empty","pageNumber","Math","ceil","min","floor","maxCount","max","init"],"sourceRoot":""}